{% extends "base.html" %}
{% block content %}
<div class="login">
    <form method="post">
        <h2 style="text-align:center;">Iniciar sesión</h2>

        {% if error %}
            <p style="color:red; text-align: center;">{{ error }}</p>
        {% endif %}

        <label for="usuario">Usuario:</label>
        <input type="text" id="usuario" name="usuario" required>

        <label for="contraseña">Contraseña:</label>
        <input type="password" id="contraseña" name="contraseña" required>

        <label for="colegio">Colegio:</label>
        <select id="colegio" name="colegio" required>
            <option value="">Seleccione</option>
            {% for c in colegios %}
                <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
        </select>

        <label for="rol">Rol:</label>
        <select id="rol" name="rol" required onchange="mostrarCampos(this.value)">
            <option value="">Seleccione</option>
            <option value="jugador">Jugador</option>
            <option value="organizador">Organizador</option>
            <option value="expectador">Expectador</option>
        </select>

        <div id="extraCampos" style="display:none;">
            <label for="disciplina">Disciplina:</label>
            <select id="disciplina" name="disciplina">
                <option value="">Seleccione</option>
                {% for d in disciplinas %}
                    <option value="{{ d }}">{{ d }}</option>
                {% endfor %}
            </select>

            <label for="categoria">Categoría:</label>
            <select id="categoria" name="categoria">
                <option value="">Seleccione</option>
                {% for cat in categorias %}
                    <option value="{{ cat }}">{{ cat }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit">Iniciar sesión</button>
    </form>
</div>

<script>
    function mostrarCampos(rol) {
        const extra = document.getElementById("extraCampos");
        extra.style.display = (rol === "jugador") ? "block" : "none";
    }
</script>
{% endblock %}
